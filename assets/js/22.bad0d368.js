(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{367:function(e,t,s){"use strict";s.r(t);var a=s(42),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"bisq-dao-development-setup-guide"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bisq-dao-development-setup-guide"}},[e._v("#")]),e._v(" Bisq DAO development setup guide")]),e._v(" "),s("p",[e._v("This guide describes how to setup a Bisq DAO development environment running against a local Bitcoin regtest network.\nIt assumes you have already configured your development environment following the "),s("RouterLink",{attrs:{to:"/bisq/docs/dev-setup.html"}},[e._v("dev setup guide")]),e._v(".")],1),e._v(" "),s("h2",{attrs:{id:"configure-bitcoin-core"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configure-bitcoin-core"}},[e._v("#")]),e._v(" Configure Bitcoin Core")]),e._v(" "),s("ol",[s("li",[e._v("Create/configure the "),s("a",{attrs:{href:"https://en.bitcoin.it/wiki/Running_Bitcoin#Bitcoin.conf_Configuration_File",target:"_blank",rel:"noopener noreferrer"}},[e._v("bitcoin.conf"),s("OutboundLink")],1),e._v(" file inside the Bitcoin Core "),s("a",{attrs:{href:"https://en.bitcoin.it/wiki/Data_directory#Default_Location",target:"_blank",rel:"noopener noreferrer"}},[e._v("data directory"),s("OutboundLink")],1),e._v(" as follows.")])]),e._v(" "),s("p",[s("em",[e._v("Please note that "),s("code",[e._v("txindex")]),e._v(" triggers a resync of the entire blockchain and be aware if you set that on mainnet it will take a while. Also, extra settings for more security are recommended if you run this in mainnet mode.")])]),e._v(" "),s("p",[e._v("Linux:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("regtest=1\n\n# The default rpcPort for regtest from Bitcoin Core 0.16 and higher is: 18443\n# The default rpcPort for testnet is: 18332\n# For mainnet: 8332\n[regtest]\npeerbloomfilters=1\nrpcport=18443\n\nserver=1\ntxindex=1\nrpcuser=YOUR_USER_NAME\nrpcpassword=YOUR_PW\nblocknotify=bash ~/.bitcoin/blocknotify %s\n")])])]),s("p",[e._v("MacOS:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("regtest=1\n\n# The default rpcPort for regtest from Bitcoin Core 0.16 and higher is: 18443\n# The default rpcPort for testnet is: 18332\n# For mainnet: 8332\n[regtest]\npeerbloomfilters=1\nrpcport=18443\n\nserver=1\ntxindex=1\nrpcuser=YOUR_USER_NAME\nrpcpassword=YOUR_PW\nblocknotify=bash ~/Library/Application\\ Support/Bitcoin/blocknotify %s\n")])])]),s("p",[e._v("Windows:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('regtest=1\n\n# The default rpcPort for regtest from Bitcoin Core 0.16 and higher is: 18443\n# The default rpcPort for testnet is: 18332\n# For mainnet: 8332\n[regtest]\npeerbloomfilters=1\nrpcport=18443\n\nserver=1\ntxindex=1\nrpcuser=YOUR_USER_NAME\nrpcpassword=YOUR_PW\nblocknotify="%AppData%\\Bitcoin\\blocknotify.bat" %s\n')])])]),s("ol",{attrs:{start:"2"}},[s("li",[e._v("Create a "),s("code",[e._v("blocknotify")]),e._v(" file ("),s("code",[e._v("blocknotify.bat")]),e._v(" on Windows) inside the Bitcoin Core "),s("a",{attrs:{href:"https://en.bitcoin.it/wiki/Data_directory#Default_Location",target:"_blank",rel:"noopener noreferrer"}},[e._v("data directory"),s("OutboundLink")],1),e._v(" with the following content.\nThis defines the ports where a new block event gets forwarded. Bisq will listen on that port and each Bisq node needs to use a different port. You can add or remove ports as needed.")])]),e._v(" "),s("p",[s("em",[e._v("On Windows, you will need to download and install "),s("a",{attrs:{href:"https://nmap.org/ncat/",target:"_blank",rel:"noopener noreferrer"}},[e._v("ncat"),s("OutboundLink")],1),e._v(" to be able to use the ncat command.")])]),e._v(" "),s("p",[e._v("Linux/MacOS:")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[e._v("#!/bin/bash")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("echo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("nc")]),e._v(" -w "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("127.0")]),e._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("5120")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("echo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("nc")]),e._v(" -w "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("127.0")]),e._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("5121")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("echo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("nc")]),e._v(" -w "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("127.0")]),e._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("5122")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("echo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("nc")]),e._v(" -w "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("127.0")]),e._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("5123")]),e._v("\n")])])]),s("p",[e._v("Windows:")]),e._v(" "),s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("echo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("%1")]),e._v(" | ncat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[e._v("-w")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("127")]),e._v("."),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("."),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("."),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("5120")])]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("echo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("%1")]),e._v(" | ncat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[e._v("-w")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("127")]),e._v("."),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("."),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("."),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("5121")])]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("echo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("%1")]),e._v(" | ncat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[e._v("-w")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("127")]),e._v("."),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("."),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("."),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("5122")])]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("echo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("%1")]),e._v(" | ncat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[e._v("-w")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("127")]),e._v("."),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("."),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("."),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("5123")])]),e._v("\n")])])]),s("h2",{attrs:{id:"program-arguments-for-dao-mode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#program-arguments-for-dao-mode"}},[e._v("#")]),e._v(" Program arguments for DAO mode")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("--daoActivated")]),e._v(": If set to true it enables the DAO mode. For testnet and regtest it is enabled by default.")]),e._v(" "),s("li",[s("code",[e._v("--genesisBlockHeight")]),e._v(": If set it overrides the hard coded block height of the genesis tx. Set it to your local genesis tx height.")]),e._v(" "),s("li",[s("code",[e._v("--genesisTxId")]),e._v(": If set it overrides the hard coded genesis tx ID. Set it to your local genesis tx ID.")]),e._v(" "),s("li",[s("code",[e._v("--fullDaoNode")]),e._v(": If true it enables full DAO node mode (in contrast to default lite node mode). At least one seed node must be running as a full DAO node to support other lite nodes.")]),e._v(" "),s("li",[s("code",[e._v("--rpcUser")]),e._v(": RPC user as defined in bitcoin.conf")]),e._v(" "),s("li",[s("code",[e._v("--rpcPassword")]),e._v(": RPC pw as defined in bitcoin.conf")]),e._v(" "),s("li",[s("code",[e._v("--rpcPort")]),e._v(": RPC port. For regtest 18443")]),e._v(" "),s("li",[s("code",[e._v("--rpcBlockNotificationPort")]),e._v(": One of the ports defined in the "),s("code",[e._v("blocknotify")]),e._v(" file.")])]),e._v(" "),s("h2",{attrs:{id:"run-the-application-in-dao-mode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#run-the-application-in-dao-mode"}},[e._v("#")]),e._v(" Run the application in DAO mode")]),e._v(" "),s("p",[e._v("If you want to run any instance in DAO mode, use the following program arguments.")]),e._v(" "),s("p",[e._v("Full node mode:")]),e._v(" "),s("p",[s("code",[e._v("--daoActivated=true --genesisBlockHeight=111 --genesisTxId=30af0050040befd8af25068cc697e418e09c2d8ebd8d411d2240591b9ec203cf --baseCurrencyNetwork=BTC_REGTEST --useDevPrivilegeKeys=true --useLocalhostForP2P=true --nodePort=7777 --appName=bisq-BTC_REGTEST_Alice_dao --fullDaoNode=true --rpcUser=YOUR_USER_NAME --rpcPassword=YOUR_PW --rpcPort=18443 --rpcBlockNotificationPort=5120")])]),e._v(" "),s("p",[e._v("Lite node mode:")]),e._v(" "),s("p",[e._v("Note: At least one seed node must be running as a full DAO node to support other lite nodes.")]),e._v(" "),s("p",[s("code",[e._v("--daoActivated=true --genesisBlockHeight=111 --genesisTxId=30af0050040befd8af25068cc697e418e09c2d8ebd8d411d2240591b9ec203cf --baseCurrencyNetwork=BTC_REGTEST --useDevPrivilegeKeys=true --useLocalhostForP2P=true --nodePort=8888 --appName=bisq-BTC_REGTEST_Bob_dao")])]),e._v(" "),s("p",[s("em",[e._v("Don't forget to use different rpcBlockNotificationPorts for different full node instances, otherwise only one node will receive the new block event forwarded to that port.")])]),e._v(" "),s("h2",{attrs:{id:"dao-genesis-transaction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dao-genesis-transaction"}},[e._v("#")]),e._v(" DAO genesis transaction")]),e._v(" "),s("h3",{attrs:{id:"use-the-predefined-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#use-the-predefined-setup"}},[e._v("#")]),e._v(" Use the predefined setup")]),e._v(" "),s("p",[e._v("The creation of the genesis tx is a bit cumbersome. To make it easier to get started you can use the "),s("a",{attrs:{href:"dao-setup.zip"}},[e._v("dao-setup.zip")]),e._v(" file.\nExtract the file and use those data directories for the Bitcoin Core as well as the Alice and Bob instances which are configured to have the genesis tx as defined in the above program arguments ("),s("code",[e._v("30af0050040befd8af25068cc697e418e09c2d8ebd8d411d2240591b9ec203cf")]),e._v(" at height "),s("code",[e._v("111")]),e._v(").")]),e._v(" "),s("p",[s("em",[e._v("You need to adjust the path to the "),s("code",[e._v("blocknotify")]),e._v(" file inside of "),s("code",[e._v("bitcoin.conf")]),e._v(" before starting Bitcoin Core.")])]),e._v(" "),s("h3",{attrs:{id:"setup-a-custom-dao-genesis-transaction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setup-a-custom-dao-genesis-transaction"}},[e._v("#")]),e._v(" Setup a custom DAO genesis transaction")]),e._v(" "),s("p",[e._v("To create your own genesis transaction follow these steps:")]),e._v(" "),s("ul",[s("li",[e._v("Send 2.50010000 BTC from Bitcoin Core to another address inside Bitcoin Core (label it with "),s("code",[e._v("Genesis funding address")]),e._v(").")]),e._v(" "),s("li",[e._v("Go to the send screen and open the coin control feature. Select the labeled transaction output of the address labeled with "),s("code",[e._v("Genesis funding address")]),e._v(". Use that as the only input source for the genesis tx.")]),e._v(" "),s("li",[e._v("Start Alice in full or lite node mode and go to the DAO/Wallet/Receive screen. Copy the BSQ address and use it for one of the receivers of the genesis tx. When pasting into Bitcoin Core remove the "),s("code",[e._v("B")]),e._v(" prefix - that prefix is marking a BSQ address but technically it is a BTC address.")]),e._v(" "),s("li",[e._v("Do the same with Bob.")]),e._v(" "),s("li",[e._v("You send in sum exactly 2.5 BTC to both Alice and Bob. You can choose how to distribute it (e.g. 1 BTC to Alice 1.5 BTC to Bob).")]),e._v(" "),s("li",[e._v("Set the miner fee so that it is exactly the remaining 0.00010000 BTC. That might be the tricky part as miner fee selection is not very convenient in Bitcoin Core. In worst case if you cannot get the right miner fee you can add the difference to one of the receivers (e.g. send 1.0000234 BTC instead of 1 BTC).")])]),e._v(" "),s("p",[s("em",[e._v("Note: It is important that there is exactly 2.5 BTC spent entirely as described, otherwise the genesis tx is invalid.")])])])}),[],!1,null,null,null);t.default=n.exports}}]);